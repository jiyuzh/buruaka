#!/usr/bin/env sh

_hi=8 # high watermark (lines of output)
_lo=6 # low watermark (lines of output)

_txt=`ls -C -w $(tput cols) --color=always`
_cnt=`echo "$_txt" | wc -l`

if [ $_cnt -lt $_hi ]; then
	echo "$_txt"
else
	_head=$(($_lo / 2))
	_tail=$(($_lo - $_head))
	_rem=$(($_cnt - $_lo))

	echo "$_txt" | head -n $_head
	echo "..."
	echo "$_txt" | tail -n $_tail
	echo "($_rem lines not shown)"
fi
